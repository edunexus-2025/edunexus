
[
    {
        "id": "pbc_783857703",
        "listRule": "@request.auth.id != \"\" && (teacher = @request.auth.id || student = @request.auth.id)",
        "viewRule": "@request.auth.id != \"\" && (teacher = @request.auth.id || student = @request.auth.id)",
        "createRule": "@request.auth.id != \"\"", 
        "updateRule": "@request.auth.id != \"\" && teacher = @request.auth.id", 
        "deleteRule": "@request.auth.role = \"admin\"",
        "name": "students_teachers_upgrade_plan",
        "type": "base",
        "system": false,
        "schema": [
            {
                "id": "text3208210256",
                "name": "id",
                "type": "text",
                "system": true,
                "required": true,
                "presentable": false,
                "options": { "min": 15, "max": 15, "pattern": "^[a-z0-9]+$", "autogeneratePattern": "[a-z0-9]{15}" }
            },
            {
                "id": "relation3072569139",
                "name": "student",
                "type": "relation",
                "system": false,
                "required": true,
                "presentable": true,
                "options": {
                    "collectionId": "pbc_1377172174",
                    "cascadeDelete": false,
                    "minSelect": 1,
                    "maxSelect": 1,
                    "displayFields": ["name", "email"]
                }
            },
            {
                "id": "relation2968954581",
                "name": "teacher",
                "type": "relation",
                "system": false,
                "required": true,
                "presentable": true,
                "options": {
                    "collectionId": "pbc_2504364897",
                    "cascadeDelete": false,
                    "minSelect": 1,
                    "maxSelect": 1,
                    "displayFields": ["name", "EduNexus_Name"]
                }
            },
            {
                "id": "relation_stu_teacher_plan_id",
                "name": "teachers_plan_id",
                "type": "relation",
                "system": false,
                "required": true,
                "presentable": true,
                "options": {
                    "collectionId": "pbc_3477515458",
                    "cascadeDelete": false,
                    "minSelect": 1,
                    "maxSelect": 1,
                    "displayFields": ["Plan_name", "plan_price"]
                }
            },
            {
                "id": "text2716750454",
                "name": "teachers_plan_name_cache",
                "type": "text",
                "system": false,
                "required": false,
                "presentable": true,
                "options": { "min": null, "max": 100, "pattern": "" }
            },
            {
                "id": "date3521798513",
                "name": "starting_date",
                "type": "date",
                "system": false,
                "required": true,
                "presentable": true,
                "options": { "min": "", "max": "" }
            },
            {
                "id": "date4141751240",
                "name": "expiry_date",
                "type": "date",
                "system": false,
                "required": true,
                "presentable": true,
                "options": { "min": "", "max": "" }
            },
            {
                "id": "number906432282",
                "name": "amount_paid_to_edunexus",
                "type": "number",
                "system": false,
                "required": false,
                "presentable": true,
                "options": { "min": 0, "noDecimal": false }
            },
            {
                "id": "number1617636011",
                "name": "amount_recieved_to_teacher",
                "type": "number",
                "system": false,
                "required": false,
                "presentable": true,
                "options": { "min": 0, "noDecimal": false }
            },
            {
                "id": "text_payment_id_razorpay",
                "name": "payment_id_razorpay",
                "type": "text",
                "system": false,
                "required": false,
                "presentable": false,
                "options": { "min": null, "max": 100, "pattern": "" }
            },
            {
                "id": "text_order_id_razorpay",
                "name": "order_id_razorpay",
                "type": "text",
                "system": false,
                "required": false,
                "presentable": false,
                "options": { "min": null, "max": 100, "pattern": "" }
            },
            {
                "id": "select_payment_status",
                "name": "payment_status",
                "type": "select",
                "system": false,
                "required": true,
                "presentable": true,
                "options": {
                    "maxSelect": 1,
                    "values": ["pending", "successful", "failed", "refunded"]
                }
            },
            {
                "id": "autodate2990389176",
                "name": "created",
                "type": "date",
                "system": true,
                "required": false,
                "presentable": false,
                "options": {"min": "", "max": ""}
            },
            {
                "id": "autodate3332085495",
                "name": "updated",
                "type": "date",
                "system": true,
                "required": false,
                "presentable": false,
                "options": {"min": "", "max": ""}
            }
        ],
        "indexes": [
            "CREATE INDEX idx_stup_teacher ON students_teachers_upgrade_plan (teacher)",
            "CREATE INDEX idx_stup_student ON students_teachers_upgrade_plan (student)",
            "CREATE INDEX idx_stup_plan ON students_teachers_upgrade_plan (teachers_plan_id)"
        ],
        "options": {}
    }
]
